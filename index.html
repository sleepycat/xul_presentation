<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>Intro to XUL - Mike Williamson</title>

    <link href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|PT+Sans:400,700,400italic,700italic|PT+Serif:400,700,400italic,700italic" rel="stylesheet" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript">
        $(function(){
          prettyPrint();
        });
    </script>
    <link href="css/prettify.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="js/prettify.js"></script>
    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
    <style type="text/css">

      html, body { height:100% }
      body { background-color: #666; }

      pre.code {
        margin:0px;
        font-size: 20px;
        width: 1020px;
        height: 780px;
        display:table;
      }

      .code_div {
        height: 780px;
        background-color: #1d1f21;
        border-radius: 10px;
      }
      .slide {
          display: block;
          width: 900px;
          height: 700px;
          padding: 40px 60px;
          background-color: white;
          border: 1px solid rgba(0, 0, 0, .3);
          border-radius: 10px;
          box-shadow: 0 2px 6px rgba(0, 0, 0, .1);
          color: rgb(102, 102, 102);
          text-shadow: 0 2px 2px rgba(0, 0, 0, .1);
          font-family: 'Open Sans', Arial, sans-serif;
          font-size: 30px;
          line-height: 36px;
          letter-spacing: -1px;
      }

      .slide q {
          display: block;
          font-size: 50px;
          line-height: 72px;

          margin-top: 100px;
      }

      .slide .title .subtitle {
        vertical-align: bottom;
        text-align: center;
      }

      .subtitle {
        font-size: 2em;
      }

      .slide q strong {
          white-space: nowrap;
      }

      .impress-supported .fallback-message {
          display: none;
      }

      #intro {
        position:relative;
        overflow:hidden;
      }

      #mozilla_logo {
        position:relative;
        height: 400px;
        left: 500px;
        top: 240px;

      }

    </style>
</head>

<body class="impress-not-supported">

<!--
    For example this fallback message is only visible when there is `impress-not-supported` class on body.
-->
<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>

<!--
    To change the duration of the transition between slides use `data-transition-duration="2000"` giving it
    a number of ms. It defaults to 1000 (1s).

    You can also control the perspective with `data-perspective="500"` giving it a number of pixels.
    It defaults to 1000. You can set it to 0 if you don't want any 3D effects.
    If you are willing to change this value make sure you understand how CSS perspective works:
    https://developer.mozilla.org/en/CSS/perspective
-->
<div id="impress">

    <div id="intro" class="step slide" data-x="-2400" data-y="-1500">
      <h2>There is no data, only XUL</h2>
      <h3>An intro to Mozilla's XML User Interface Language</h3>
      <img id="mozilla_logo"  src="images/mozilla_logo.svg" />
    </div>

    <div class="step code_div" data-x="-1200" data-y="-1500">
      <pre class="prettyprint code linenums">&lt;!DOCTYPE html&gt;
&lt;html lang='en'&gt;
  &lt;head&gt;...&lt;/head&gt;
  &lt;body&gt;
      &lt;div&gt;
        &lt;h4&gt;One time for your mind...&lt;/h4&gt;
        &lt;math xmlns='http://www.w3.org/1998/Math/MathML'&gt;
          &lt;msqrt&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;/msqrt&gt;
        &lt;/math&gt;
        &lt;svg xmlns="http://www.w3.org/2000/svg" version="1.1"&gt;
          &lt;polygon points="100,10 40,180 190,60 10,60 160,180" transform="scale(0.7)"&gt;&lt;/polygon&gt;
        &lt;/svg&gt;
     &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>
    </div>

    <div class="step slide" style="text-align:center"  data-x="0" data-y="-1500">
      <h3>The Gecko layout engine</h3>
      <br/>
      <br/>
      <br/>
      <br/>
      <img src="images/gecko-logo.jpg" />
    </div>

    <div class="step" data-x="1200" data-y="-1500">
      <img src="images/dom_inspector_h4.png" />
    </div>

    <div class="step code_div" data-x="2400" data-y="-1500">
        <pre class="prettyprint linenums code">
# https://developer.mozilla.org/en-US/docs/XUL/XUL_controls
&lt;window&gt;&lt;/window&gt;
&lt;button /&gt;
&lt;checkbox /&gt;
&lt;colorpicker /&gt;
&lt;menupopup&gt;&lt;/menupopup /&gt;
&lt;datepicker /&gt;
&lt;label /&gt;
&lt;progressmeter /&gt;
...

# And the big one:
&lt;browser /&gt;
</pre>
    </div>

    <div class="step code_div" data-x="3600" data-y="-1500">
        <pre class="prettyprint linenums code" style="font-size:3.5em;">
&lt;button oncommand="myfunction()"/&gt;
</pre>
    </div>

    <div class="step code_div" data-x="4800" data-y="-1500">
        <pre class="prettyprint code linenums">
git clone git://github.com/matthewkastor/XULRunner-Examples.git

find XULRunner-Examples/helloWorld/
XULRunner-Examples/helloWorld/
XULRunner-Examples/helloWorld/chrome.manifest
XULRunner-Examples/helloWorld/README.txt
XULRunner-Examples/helloWorld/helloWorld.bat
XULRunner-Examples/helloWorld/chrome
XULRunner-Examples/helloWorld/chrome/content
XULRunner-Examples/helloWorld/chrome/content/hello.xul
XULRunner-Examples/helloWorld/chrome/content/main.js
XULRunner-Examples/helloWorld/helloWorld - ff.bat
XULRunner-Examples/helloWorld/helloWorld.exe
XULRunner-Examples/helloWorld/application.ini
XULRunner-Examples/helloWorld/helloWorld with jsconsole.bat
XULRunner-Examples/helloWorld/defaults
XULRunner-Examples/helloWorld/defaults/preferences
XULRunner-Examples/helloWorld/defaults/preferences/prefs.js

cat XULRunner-Examples/helloWorld/chrome/content/hello.xul
</pre>
    </div>

    <div class="step code_div" data-x="6000" data-y="-1500">
        <pre class="prettyprint code linenums">
&lt;?xml version="1.0"?&gt;
&lt;?xml-stylesheet href="chrome://global/skin" type="text/css"?&gt;
&lt;window title="☭ Hial Atropa!! ☭"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
    width="800px"
    height="500px"&gt;
&lt;script type="application/javascript" src="chrome://myapp/content/main.js"/&gt;

  &lt;caption label="Hello World"/&gt;
  &lt;separator/&gt;
  &lt;button label="Click for more!" oncommand="showMore();"/&gt;
  &lt;separator/&gt;
  &lt;description id="more-text" hidden="true"&gt;
This is a simple XULRunner application. XUL is simple to use and quite powerful and can even be used on mobile devices.
&lt;/description&gt;
&lt;/window&gt;</pre>
    </div>

    <div class="step code_div" data-x="7200" data-y="-1500">
      <pre class="prettyprint linenums code">
function showMore() {
  document.getElementById("more-text").hidden = false;
}
      </pre>
    </div>

    <div class="step code_div" data-x="8400" data-y="-1500">
      <pre class="prettyprint linenums code">
# get XULRunner from ftp.mozilla.org/pub/mozilla.org/xulrunner
# Look in releases/19.0.2/runtimes/

./xulrunner XULRunner-Examples/helloWorld/application.ini
</pre>
    </div>

    <div class="step" data-x="9600" data-y="-1500">
        <img src="images/hello_world.png" />
    </div>

    <div class="step" data-x="10800" data-y="-1500">
        <img src="images/hello_world_more.png" />
    </div>

    <div class="step code_div" data-x="12000" data-y="-1500">
      <pre class="prettyprint linenums code">
# Explore XUL on your own:
# https://developer.mozilla.org/en-US/docs/XUL/XUL_Reference
# Also lots of working examples are include here:

./xulrunner XULRunner-Examples/XULPeriodicTable/application.ini
</pre>
    </div>

    <div class="step" data-x="13200" data-y="-1500">
        <img src="images/periodic_table.png" />
    </div>

    <div class="step slide" data-x="14400" data-y="-1500">
      <h2 style="text-align:center">Mozilla as a platform</h2>

      <q style="font-size:0.8em;line-height:1em">
      The XULRunner engine includes the core Gecko rendering engine (the code that
      does all the drawing), along with several key technologies:
      <ul>
        <li>The Cross-Platform Component Model (XPCOM)</li>
        <li>Networking support</li>
        <li>Document Object Model (DOM) editing</li>
        <li>Cryptography</li>
        <li>The XML Bindings Language (XBL)</li>
        <li>XUL</li>
        <li>Scalable Vector Graphics (SVG)</li>
        <li>XSLT</li>
        <li>XML supporting technologies (DOM Inspector, XMLHttpRequest, etc.)</li>
        <li>SOAP services</li>
        <li>Toolbar find-ahead</li>
        <li>Accessibility</li>
        <li>History implementation</li>
      </ul>
      </q>
      <p class="font-size:0.4em">Kenneth C. Feldt - Programming Firefox (O'Reilly 2007)</p>
    </div>


    <div class="step slide" data-x="15600" data-y="-1500">
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
      <h2 style="text-align:center">Tips for working with XULRunner</h2>
    </div>

    <div class="step code_div" data-x="16800" data-y="-1500">
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<pre class="prettyprint code" style="padding-left:30px">
#
# Firefox is a XULRunner application.
#
# Every install of Firefox has its own XULRunner.
# Borrow it!

firefox -app ~/projects/XULRunner-Examples/helloWorld/application.ini

</pre>
    </div>

    <div class="step code_div" data-x="18000" data-y="-1500">
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<pre class="prettyprint code" style="padding-left:30px">
#
# In XULRunner no one can hear your javascript scream.
#

firefox -app application.ini -jsconsole

</pre>
    </div>

<div class="step" data-x="19200" data-y="-1500">
  <img src="images/jsconsole.png" />
</div>

    <div class="step code_div" data-x="20400" data-y="-1500">
<br/>
<br/>
<br/>
<br/>
<br/>
<pre class="prettyprint code" style="padding-left:30px">
#
# Set your prefs
#
# defaults/preferences/prefs.js


//What should be in the window when the application launches:
pref("toolkit.defaultChromeURI", "chrome://ffkiosk/content/main.xul");

/* debugging prefs */

//enable the mozilla equivalent of puts: dump()
pref("browser.dom.window.dump.enabled", true);
//send error messages to the console:
pref("javascript.options.showInConsole", true);
//complain about non-standard js
pref("javascript.options.strict", true);

/* don't leave these in a production app */
//ensure that window contents are read from disk each time:
pref("nglayout.debug.disable_xul_cache", true);
//disable fastloading
pref("nglayout.debug.disable_xul_fastload", true);
</pre>
    </div>

    <div class="step code_div" data-x="21600" data-y="-1500">
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<pre class="prettyprint code" style="padding-left:30px">
#
# Where chrome URLs come from: chrome.manifest
#
# Each line has the format:
# type_of_content name_of_package path(relative to chrome dir)
#

#cat XULRunner-Examples/helloWorld/chrome.manifest
content myapp file:chrome/content/

&lt;script src="chrome://myapp/content/main.js"/&gt;

#cat ffkiosk/chrome/chrome.manifest
locale branding en-US chrome/locale/branding/
content ffkiosk content/*
skin ffkiosk default/ ffkiosk/skin/

&lt;?xml-stylesheet href="chrome://ffkiosk/skin/main.css" type="text/css" ?&gt;
&lt;script src='chrome://ffkiosk/content/jquery-1.7.2.js' &gt;&lt;/script&gt;
&lt;script src='chrome://ffkiosk/content/io.js' &gt;&lt;/script&gt;
&lt;script src='chrome://ffkiosk/content/main.js' &gt;&lt;/script&gt;
</pre>
    </div>

    <div class="step slide" data-x="22800" data-y="-1500">
    <h3>Cross Platform Component Object Model (XPCOM)</h3>
    <p>A set of cross platform libraries that form the base of the Mozilla platform.</p>
    <p style="font-size:0.8em">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference</p>
    <table>
      <tr>
        <td>
          <ul>
            <li>nsIWifiAccessPoint</li>
            <li>nsIWifiMonitor</li>
            <li>nsICookieService</li>
            <li>nsICookieStorage</li>
            <li>nsICrashReporter</li>
            <li>nsICryptoHMAC</li>
            <li>nsICryptoHash</li>
            <li>nsICurrentCharsetListener</li>
            <li>nsICycleCollectorListener</li>
            <li>nsIDBChangeAnnouncer</li>
            <li>nsIDBChangeListener</li>
          </ul>
        </td><td>
          <ul>
            <li>nsIDNSListener</li>
            <li>nsIDNSRecord</li>
            <li>nsIDNSRequest</li>
            <li>nsIXmlRpcClient</li>
            <li>nsICommandLineHandler</li>
            <li>nsIUpdateChecker</li>
            <li>nsIThreadManager</li>
            <li>nsIThreadObserver</li>
            <li>nsIThreadPool</li>
            <li>nsIFile</li>
            <li>nsIFileInputStream</li>
          </ul>
        </td>
      </tr>
    </table>
    </div>

    <div class="step code_div" data-x="24000" data-y="-1500" >
<br/>
<br/>
<br/>
<br/>
<pre class="prettyprint numlines code" style="padding-left:30px">
/*
* Accessing XPCOM components from Javascript
* Using Mozilla's XPConnect interface:
*/

var Cc = Components.classes;
var Ci = Components.interfaces;

var filePicker = Cc["@mozilla.org/filepicker;1"]
                 .createInstance(Ci.nsIFilePicker);

var networkLinkService = Cc["@mozilla.org/network/network-link-service;1"]
                .getService(Ci.nsINetworkLinkService);

var observerService = Cc["@mozilla.org/observer-service;1"]
                .getService(Ci.nsIObserverService);
</pre>
    </div>

    <div class="step" data-x="25200" data-y="-1500" >
      <img src="images/what_sucks.png" style="margin-left:70px" />
    </div>


    <div class="step code_div" data-x="26400" data-y="-1500" >
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
<pre class="code prettyprint" style="padding-left:30px;">
#
# The best documentation is still Firefox.
#

tar -xjf firefox-19.0.2.source.tar.bz2
cd mozilla-release
grep -ri nsIHttpServer .
</pre>
    </div>

    <div class="step code_div" data-x="27600" data-y="-1500" >
<pre class="code prettyprint linenums">
// Playing with observers is interesting.
// Modifying XULRunner-Examples/helloWorld/chrome/content/main.js

function showMore() {
  document.getElementById("more-text").hidden = false;

  var Ci = Components.interfaces;
  var Cc = Components.classes;
  var observerService = Cc["@mozilla.org/observer-service;1"].getService(Ci.nsIObserverService);
  observerService.addObserver(myObserver, "*", false);//observe all events
}
var myObserver = {
  observe: function(aSubject, aTopic, aData){
    dump("Subject: " + aSubject + "\tTopic: " + aTopic + "\tData: " + aData + "\r\n" );
  }
}
</pre>
    </div>

    <div class="step code_div" data-x="28800" data-y="-1500" >
<pre class="code prettyprint linenums">
Subject: null Topic: cycle-collector-forget-skippable Data: null
Subject: null Topic: cycle-collector-forget-skippable Data: null
Subject: null Topic: cycle-collector-begin  Data: null
Subject: null Topic: user-interaction-active  Data: null
Subject: [object XMLDocument] Topic: document-element-inserted  Data:
Subject: [xpconnect wrapped nsISupports]  Topic: network:link-status-changed  Data: down
Subject: null Topic: user-interaction-active  Data: null
Subject: null Topic: cycle-collector-forget-skippable Data: null
Subject: null Topic: cycle-collector-forget-skippable Data: null
Subject: null Topic: cycle-collector-begin  Data: null
Subject: null Topic: user-interaction-inactive  Data: null
Subject: [xpconnect wrapped nsISupports]  Topic: network:link-status-changed  Data: up
Subject: null Topic: user-interaction-active  Data: null
Subject: null Topic: user-interaction-active  Data: null
</pre>
    </div>

    <div class="step code_div" data-x="30000" data-y="-1500">
<pre class="code prettyprint linenums">
!!! xml
&lt;?xml-stylesheet href="chrome://ffkiosk/skin/main.css" type="text/css" ?&gt;
%window{
        id: "main",
        title: "ffkiosk",
        onload: "onload();",
        sizemode: "fullscreen",
        height: "768",
        width: "1024",
         xmlns: "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
}
  %script{type: "application/javascript", src: "chrome://ffkiosk/content/jquery-1.7.2.js"}
  %script{type:"application/javascript", src: "chrome://ffkiosk/content/io.js"}
  %script{type: "application/javascript", src: "chrome://ffkiosk/content/main.js"}

  %toolbar
    %toolbaritem
      %toolbarbutton{label: "I'm a button"}/
    %toolbaritem
      %toolbarbutton{label:"Foo", type:"menu-button"}
        %menupopup
          %menuitem{label: "Bar"}/
          %menuitem{label: "Baz"}/
  %browser{id: "browser", type: "content-primary", flex: "1"}/
</pre>
    </div>

    <div class="step slide" data-x="31200" data-y="-1500">
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <h2 style="text-align:center">Questions?</h2>
      <br/>
      <br/>
      <p style="font-size:0.8em;text-align:center">My XUL application: git://github.com/sleepycat/ffkiosk.git</p>
    </div>

    <div id="overview" class="step" data-x="13800" data-y="-1500" data-scale="20">

    </div>

</div>
<script>
if ("ontouchstart" in document.documentElement) {
    document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
}
</script>

<script src="js/impress.js"></script>
<script>impress().init();</script>


</body>
</html>
